<main class="main">

    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Tienda</a></li>
                <li class="breadcrumb-item active" aria-current="page">Mi Cuenta</li>
            </ol>
        </div><!-- End .container -->
    </nav><!-- End .breadcrumb-nav -->

    <div class="page-content">
        <div class="dashboard">
            <div class="container">
                <div class="row">
                    <aside class="col-md-4 col-lg-3">
                        <ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab"
                                    href="#tab-dashboard" role="tab" aria-controls="tab-dashboard"
                                    aria-selected="true">Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab"
                                    aria-controls="tab-orders" aria-selected="false">Compras</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address"
                                    role="tab" aria-controls="tab-address" aria-selected="false">Direcciones</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account"
                                    role="tab" aria-controls="tab-account" aria-selected="false">Mi datos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" (click)="onLogout()">Cerrar sesion</a>
                            </li>
                        </ul>
                    </aside><!-- End .col-lg-3 -->

                    <div class="col-md-8 col-lg-9">
                        <div class="tab-content">
                            <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel"
                                aria-labelledby="tab-dashboard-link">
                                <div class="welcome-box mb-4">
                                    <h3 class="mb-2">Hola, <span
                                            class="text-primary font-weight-bold">{{user.name}}</span></h3>
                                    <p class="text-muted">
                                        Desde el panel de tu cuenta puedes ver tus últimas <a href="#tab-orders"
                                            class="tab-trigger-link text-primary link-underline">compras</a>,
                                        administrar tus <a href="#tab-address"
                                            class="tab-trigger-link text-primary link-underline">direcciones</a>
                                        y <a href="#tab-account"
                                            class="tab-trigger-link text-primary link-underline">editar tus datos</a>.
                                    </p>
                                </div>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-orders" role="tabpanel"
                                aria-labelledby="tab-orders-link">
                                <p *ngIf="!ordenes" class="text-center py-4 text-muted">No se ha realizado ninguna
                                    compra todavía.</p>
                                <div class="row">
                                    <div class="col-lg-6" *ngFor="let sale of ordenes">
                                        <div class="card card-dashboard modern-card shadow-sm border-0 mb-3">
                                            <div class="card-body p-4">
                                                <div class="d-flex justify-content-between align-items-center mb-3">
                                                    <h3 class="card-title h5 mb-0 font-weight-bold text-dark">Ped.
                                                        #{{sale.id}}</h3>
                                                    <span class="badge badge-light text-muted">{{sale.created |
                                                        date:'dd/MM/yyyy'}}</span>
                                                </div>

                                                <div class="order-info mb-3">
                                                    <p class="mb-1 text-muted small text-uppercase font-weight-bold">
                                                        Estado</p>
                                                    <p class="text-primary font-weight-bold">{{sale.statename}}</p>
                                                </div>

                                                <div class="order-total mb-3">
                                                    <p class="mb-1 text-muted small text-uppercase font-weight-bold">
                                                        Total</p>
                                                    <p class="h4 text-dark font-weight-bold">{{sale.total |
                                                        currency:'COP':'symbol':'1.0-0':'es-CO'}}</p>
                                                </div>

                                                <a href="#" class="btn btn-outline-primary-2 btn-pill btn-block">
                                                    <span>Ver Detalles</span> <i class="icon-eye ml-2"></i>
                                                </a>
                                            </div><!-- End .card-body -->
                                        </div><!-- End .card-dashboard -->
                                    </div><!-- End .col-lg-6 -->
                                </div><!-- End .row -->
                                <a [routerLink]="['/']" class="btn btn-primary btn-pill shadow mt-3">
                                    <span>Ir a Comprar</span><i class="icon-long-arrow-right"></i>
                                </a>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-downloads" role="tabpanel"
                                aria-labelledby="tab-downloads-link">
                                <p>No downloads available yet.</p>
                                <a href="category.html" class="btn btn-outline-primary-2"><span>GO SHOP</span><i
                                        class="icon-long-arrow-right"></i></a>
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-address" role="tabpanel"
                                aria-labelledby="tab-address-link">
                                <p class="mb-4 text-muted">Las siguientes direcciones se usarán por defecto en la página
                                    de pago.</p>

                                <div class="row">
                                    <div class="col-lg-6" *ngFor="let address of direcciones">
                                        <div class="card card-dashboard modern-card shadow-sm border-0 mb-3 h-100">
                                            <div class="card-body p-4 d-flex flex-column">
                                                <h3 class="card-title h5 font-weight-bold text-dark mb-3">
                                                    {{address.name}}</h3>

                                                <div class="address-details flex-grow-1 text-muted mb-4"
                                                    style="line-height: 1.6; font-size: 1.4rem;">
                                                    {{address.address}}<br>
                                                    <span *ngIf="address?.nbh">{{address?.nbh}}<br></span>
                                                    {{address.city}} - {{address.state}}
                                                </div>

                                                <a href="#"
                                                    class="btn btn-outline-primary-2 btn-pill btn-sm align-self-start">
                                                    Editar <i class="icon-edit ml-1"></i>
                                                </a>
                                            </div><!-- End .card-body -->
                                        </div><!-- End .card-dashboard -->
                                    </div><!-- End .col-lg-6 -->
                                </div><!-- End .row -->
                            </div><!-- .End .tab-pane -->

                            <div class="tab-pane fade" id="tab-account" role="tabpanel"
                                aria-labelledby="tab-account-link">
                                <form action="#" class="account-form">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="form-group mb-4">
                                                <label class="font-weight-bold text-dark">Nombre *</label>
                                                <input type="text" class="form-control" required
                                                    style="background: #f3f4f6;">
                                            </div>
                                        </div><!-- End .col-sm-6 -->

                                        <div class="col-sm-6">
                                            <div class="form-group mb-4">
                                                <label class="font-weight-bold text-dark">Apellido *</label>
                                                <input type="text" class="form-control" required
                                                    style="background: #f3f4f6;">
                                            </div>
                                        </div><!-- End .col-sm-6 -->
                                    </div><!-- End .row -->

                                    <div class="form-group mb-4">
                                        <label class="font-weight-bold text-dark">Nombre Visual *</label>
                                        <input type="text" class="form-control" required style="background: #f3f4f6;">
                                        <small class="form-text text-muted">Así se verá tu nombre en la sección de
                                            cuenta y valoraciones.</small>
                                    </div>

                                    <div class="form-group mb-4">
                                        <label class="font-weight-bold text-dark">Correo Electrónico *</label>
                                        <input type="email" class="form-control" required style="background: #f3f4f6;">
                                    </div>

                                    <h5 class="mt-5 mb-3 font-weight-bold">Cambio de Contraseña</h5>

                                    <div class="form-group mb-3">
                                        <label class="font-weight-bold">Contraseña Actual (dejar en blanco si no
                                            cambia)</label>
                                        <input type="password" class="form-control" style="background: #f3f4f6;">
                                    </div>

                                    <div class="form-group mb-3">
                                        <label class="font-weight-bold">Nueva Contraseña (dejar en blanco si no
                                            cambia)</label>
                                        <input type="password" class="form-control" style="background: #f3f4f6;">
                                    </div>

                                    <div class="form-group mb-5">
                                        <label class="font-weight-bold">Confirmar Nueva Contraseña</label>
                                        <input type="password" class="form-control mb-2" style="background: #f3f4f6;">
                                    </div>

                                    <button type="submit" class="btn btn-primary btn-pill shadow-sm px-5">
                                        <span>GUARDAR CAMBIOS</span>
                                        <i class="icon-long-arrow-right"></i>
                                    </button>
                                </form>
                            </div><!-- .End .tab-pane -->
                        </div>
                    </div><!-- End .col-lg-9 -->
                </div><!-- End .row -->
            </div><!-- End .container -->
        </div><!-- End .dashboard -->
    </div><!-- End .page-content -->
</main><!-- End .main -->